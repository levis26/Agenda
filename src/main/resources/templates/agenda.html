<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Agenda de Espacios</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>
<div class="container">
    <h1 th:text="'üìÖ Agenda - ' + ${agendaViewModel.mesNombre} + ' ' + ${agendaViewModel.anyo}"></h1>

    <!-- Iterar por cada sala -->
    <div th:each="salaEntry : ${agendaViewModel.agendaPorSala}">
        <h2 th:text="'Sala: ' + ${salaEntry.key}"></h2>

        <!-- Tabla por semana -->
        <table class="agenda-table" th:each="semana : ${agendaViewModel.semanas}">
            <tr class="header-week">
                <th>Hora</th>
                <th th:each="dia : ${agendaViewModel.diasSemana}"
                    th:text="${agendaViewModel.traducirDia(dia)}"></th>
            </tr>
            <!-- Filas por horario -->
            <tr th:each="hora : ${agendaViewModel.horarios}">
                <td class="hora" th:text="${hora}"></td>
                <!-- Celdas por d√≠a -->
                <td th:each="dia : ${agendaViewModel.diasSemana}"
                    th:classappend="${agendaViewModel.getEstado(salaEntry.key, semana, dia, hora)}"
                    th:text="${agendaViewModel.getActividad(salaEntry.key, semana, dia, hora)}">
                </td>
            </tr>
        </table>
    </div>

    <!-- Secci√≥n de incidencias -->
    <div th:if="${not agendaViewModel.incidencias.isEmpty()}" class="incidencias">
        <h3>‚ö†Ô∏è Incidencias Detectadas</h3>
        <ul>
            <li th:each="incidencia : ${agendaViewModel.incidencias}"
                th:text="${incidencia}"></li>
        </ul>
    </div>
</div>
</body>
</html>